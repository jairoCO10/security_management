from typing import List
from datetime import datetime
from fixedVulnerability.repository.fixedRepository import FixedVulnerabilityRepository
from fixedVulnerability.entities.fixedEntities import CreateFixed, Fixed

class FixedGateway:
    def __init__(self) -> None:
        self.fixed_repository = FixedVulnerabilityRepository()
    

    def get_all_fixed(self)-> List[Fixed]:
        orm_fixeds = self.fixed_repository.get_all_fixed()
        fixeds = []
        for orm_fixed in orm_fixeds:
            fixeds.append(Fixed(id=orm_fixed.id, cve_id=orm_fixed.cve_id))
        return fixeds
    

    def create_fixed(self,cve_id:str)->CreateFixed:
        orm_fixed = self.fixed_repository.create_fixed(cve_id)
        return CreateFixed(cve_id= orm_fixed.cve_id)



    
    